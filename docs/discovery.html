<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vector Discovery</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <a id="top"></a>
  <header class="topbar">
    <div class="nav">
      <div class="brand">
        <span>Vector docs</span>
        <a class="nav-link" href="index.html#technical">Technical hub</a>
      </div>
      <div class="nav-links">
        <a class="nav-link" href="index.html#api-routes">API routes</a>
        <a class="nav-link" href="#top">Back to top</a>
      </div>
    </div>
  </header>
  <main>
    <div class="panel hero">
      <div>
        <h1>Discovery</h1>
        <p class="meta">Broadcast and UDP helpers to find boards on the local network.</p>
      </div>
      <div class="badge">
        <span class="tag">UDP broadcasts</span>
        <span class="tag">HELLO/FULL frames</span>
      </div>
    </div>

    <div class="panel">
      <h2>Broadcast discovery</h2>
      <p>Listen on UDP port 5050 for <code>HELLO</code> broadcasts. The payload looks like:</p>
      <pre><code>HELLO|HOSTNAME|IP|BOARD_SERIAL|VERSION|BOARD_TYPE|IS_GAME_RUNNING</code></pre>
      <p>Send <code>FULL</code> to the broadcasting address to request a full JSON description.</p>
    </div>

    <div class="panel">
      <h2>Example Python listener</h2>
      <pre><code>import json
import socket

def discover(timeout=2.0):
    sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
    sock.bind(("", 5050))
    sock.settimeout(timeout)

    hosts = []
    try:
        while True:
            data, addr = sock.recvfrom(1024)
            payload = data.decode()
            if payload.startswith("HELLO"):
                print("HELLO from", addr, payload)
                sock.sendto(b"FULL", addr)
            else:
                print("FULL from", addr)
                hosts.append(json.loads(payload))
    except socket.timeout:
        pass
    return hosts

if __name__ == "__main__":
    print(discover())
</code></pre>
    </div>

    <p class="back-top"><a class="footer-link" href="#top">Back to top</a></p>
  </main>
</body>
</html>
