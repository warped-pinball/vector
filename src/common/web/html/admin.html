<style>
  input[type="date"] {
    width: auto;
    /* max-width: 10rem;
        text-align: center; */
  }

  button.danger {
    background-color: #e73434;
    color: white;
    border: none;
  }

  button.danger:hover {
    background-color: #c53d3d;
  }

  .golden-button {
    background-color: #e8b85a;
    border-color: #e8b85a;
    box-shadow: 0 0 20px rgba(232, 185, 90, 0.51);
    animation: pulse 1s ease-in-out infinite alternate;
  }

  @keyframes pulse {
    from {
      box-shadow:
        0 0 20px rgba(232, 185, 90, 0.51),
        0 0 40px rgba(232, 185, 90, 0.3);
    }
    to {
      box-shadow:
        0 0 40px rgba(232, 185, 90, 0.8),
        0 0 80px rgba(232, 185, 90, 0.4);
    }
  }

  /* Adjustments Profiles Styling */
  .profile-row {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    /* Space between elements */
    margin-bottom: 0.5rem;
    /* Space between rows */
  }

  .profile-row input {
    margin: 0;
    /* Remove any default margin */
  }

  .profile-row input[type="radio"] {
    flex-shrink: 0;
    /* Prevents shrinking of the radio button */
  }

  .profile-row input[type="text"] {
    flex-grow: 1;
    /* Allows the text field to expand and take available space */
    max-width: 200px;
    /* Optional: Limit the width of the text field */
  }

  .profile-row button {
    flex-shrink: 0;
    /* Keeps the button size consistent */
  }

  #update-progress-log::-webkit-scrollbar {
    display: none;
  }

  /* make disabled radio button inputs opacity 0 */
  input[type="radio"]:disabled {
    opacity: 0;
  }

  .switch-diagnostics {
    display: flex;
    gap: 1rem;
    align-items: flex-start;
    flex-wrap: wrap;
  }

  .switch-grid-container {
    display: inline-block;
    padding: 0.5rem;
    background: transparent;
  }

  .switch-grid {
    display: grid;
    gap: 0.35rem;
    align-items: center;
    justify-items: center;
  }

  .switch-header {
    font-weight: 600;
  }

  .switch-cell,
  .switch-header {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.85rem;
    font-weight: 600;
    border-radius: 8px;
    border: none;
  }

  .switch-cell.green {
    background-color: #16a34a;
  }

  .switch-cell.yellow {
    background-color: #eab308;
  }

  .switch-cell.red {
    background-color: #dc2626;
  }

  .switch-cell.missing {
    background-color: #9ca3af;
  }

  .switch-cell.selected {
    box-shadow: 0 0 0 2px #60a5fa, inset 0 0 0 1px rgba(255, 255, 255, 0.08);
  }

  .switch-info-panel {
    min-width: 220px;
    padding: 0.75rem;
    border: 1px solid #1f2937;
    border-radius: 8px;
    background: transparent;
  }

  .switch-info-panel h4 {
    margin: 0 0 0.5rem 0;
  }

  .switch-info-line {
    margin: 0.25rem 0;
    font-weight: 600;
  }

  .switch-tooltip {
    position: fixed;
    z-index: 1000;
    background: rgba(31, 41, 55, 0.9);
    padding: 0.35rem 0.5rem;
    border-radius: 6px;
    font-size: 0.85rem;
    line-height: 1.25rem;
    pointer-events: none;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1),
      0 4px 6px -4px rgba(0, 0, 0, 0.1);
    display: none;
  }
</style>

<div style="text-align: left">
  <h2>Settings</h2>
  <hr />
  <section>
    <h3>Tournament Mode</h3>
    <fieldset id="score-boards">
      <label>
        <input
          id="tournament-mode-toggle"
          type="checkbox"
          role="switch"
          name="tournament-mode"
          checked
          disabled
        />
        <b>Tournament Mode:</b> save scores to tournament board instead of
        standard leaderboard
      </label>
    </fieldset>
  </section>
  <section>
    <h3>Score Claim Methods</h3>
    <fieldset id="score-claim-methods">
      <label>
        <input
          id="on-machine-toggle"
          type="checkbox"
          role="switch"
          name="on-machine"
          disabled
        />
        <b>On-Machine:</b> triggers high score every game to collect players
        initials (Only for machines where players can enter initials)
      </label>
      <label>
        <input
          id="web-ui-toggle"
          type="checkbox"
          role="switch"
          name="web"
          disabled
        />
        <b>Web Interface:</b> for a short time after playing; players may claim
        scores via web interface
      </label>
    </fieldset>
  </section>
  <section id="midnight-madness-section" class="hide">
    <h3>Midnight Madness</h3>
    <fieldset id="midnight-madness-controls">
      <label>
        <input
          id="midnight-madness-enable-toggle"
          type="checkbox"
          role="switch"
          name="midnight-madness-enable"
          disabled
        />
        <b>Enable Midnight Madness:</b> allow midnight madness features
      </label>
      <label>
        <input
          id="midnight-madness-always-toggle"
          type="checkbox"
          role="switch"
          name="midnight-madness-always"
          disabled
        />
        <b>Always Trigger:</b> start midnight madness every game
      </label>
      <button id="midnight-madness-now-button" disabled>
        Trigger Midnight Madness Now
      </button>
    </fieldset>
  </section>
  <section>
    <h3>Adjustments Profiles</h3>
    <div id="adjustments-not-supported" class="hide">
      Adjustment profiles are not yet supported for this game or rom. If you
      would like, you can
      <a href="https://github.com/warped-pinball/vector/issues/new/choose"
        >open an issue on our github</a
      >
      and we will priorotize adding it.
    </div>
    <div class="grid">
      <div>
        <fieldset>
          <div class="profile-row">
            <input
              id="restore-profile-0"
              name="profile"
              type="radio"
              disabled
            />
            <input
              id="name-profile-0"
              type="text"
              placeholder="Name profile 1"
              disabled
            />
            <button id="capture-profile-0" disabled>Capture Profile</button>
          </div>
          <div class="profile-row">
            <input
              id="restore-profile-1"
              name="profile"
              type="radio"
              disabled
            />
            <input
              id="name-profile-1"
              type="text"
              placeholder="Name profile 2"
              disabled
            />
            <button id="capture-profile-1" disabled>Capture Profile</button>
          </div>
          <div class="profile-row">
            <input
              id="restore-profile-2"
              name="profile"
              type="radio"
              disabled
            />
            <input
              id="name-profile-2"
              type="text"
              placeholder="Name profile 3"
              disabled
            />
            <button id="capture-profile-2" disabled>Capture Profile</button>
          </div>
          <div class="profile-row">
            <input
              id="restore-profile-3"
              name="profile"
              type="radio"
              disabled
            />
            <input
              id="name-profile-3"
              type="text"
              placeholder="Name profile 4"
              disabled
            />
            <button id="capture-profile-3" disabled>Capture Profile</button>
          </div>
        </fieldset>
      </div>
      <div>
        <p>
          Save your games adjustments in a profile to easilly switch between
          setups. For example "Free to play" and "Tournament"
        </p>
        <p>
          Configure profiles by setting adjustments on the machine normally.
          Then click the "Capture Profile" button.
        </p>
        <p>
          To restore your game to the adjustments saved in a profile; select the
          corresponding radio button and confirm your selection. Your game will
          reboot with the adjustments applied
        </p>
      </div>
    </div>
  </section>
  <section>
    <h3>Miscellaneous</h3>
    <fieldset>
      <label>
        <input
          id="show-ip-toggle"
          type="checkbox"
          role="switch"
          name="show-ip"
          disabled
        />
        <b>Show IP on machine</b> When enabled, vector will display its IP
        address on the game display occasionally.
        <i
          >If your IP address changes, you can view it in AP mode by rebooting
          while holding the small button <u>not</u> labeled BOOTSEL</i
        >
      </label>
    </fieldset>
  </section>

  <h2>Actions</h2>
  <hr />
  <section>
    <h3>Updates</h3>
    <div class="grid">
      <div>
        <button id="update-button" disabled>Checking for Updates</button>
      </div>
      <div>
        <p style="margin: 0">Apply the latest update to your Vector</p>
        <a id="release-link" target="_blank" rel="noopener noreferrer"></a>
      </div>
    </div>
  </section>
  <section>
    <div class="grid">
      <div>
        <details name="release-notes">
          <summary
            disabled
            id="release-notes-btn"
            class="secondary"
            role="button"
            style="width: max-content"
          >
            View Latest Changelog
          </summary>
          <article id="release-notes"></article>
        </details>
      </div>
    </div>
  </section>
  <section>
    <div class="grid">
      <div>
        <button id="update-developer-button" onclick="window.customUpdate()">
          Upload Developer Build
        </button>
      </div>
      <div>
        <p>
          This feature is intended for developers, and advanced users. Use at
          your own risk.
        </p>
      </div>
    </div>
  </section>
  <section>
    <h3>Export / Import Data</h3>
    <div class="grid">
      <div>
        <button onclick="window.downloadScores()">Export Scores</button>
      </div>
      <div>
        <p>
          Export all scores from the Leaderboard and Tournament Board as an
          update file
        </p>
      </div>
    </div>
    <div class="grid">
      <div>
        <input class="hide" type="file" id="input_scores" />
        <button id="input_scores_btn" onclick="window.clickedImportScores()">
          Import Scores
        </button>
      </div>
      <div>
        <p>
          Import scores to the Leaderboard from file generated above. Doesn't
          import Tournament scores. Will also add to individual player board
          list if a user account is registered.
        </p>
      </div>
    </div>
  </section>
  <section>
    <h3>Reset</h3>
    <div class="grid">
      <div>
        <button
          class="danger"
          onclick="confirm_auth_get('api/leaders/reset', 'Reset Leaderboard Scores')"
        >
          Reset Leaderboard
        </button>
      </div>
      <div>
        <p>
          Reset all scores on the Leaderboard, Tournament scores will not be
          effected
        </p>
      </div>
    </div>
    <div class="grid">
      <div>
        <button
          class="danger"
          onclick="confirm_auth_get('/api/tournament/reset', 'Reset Tournament Scores')"
        >
          Reset Tournament Board
        </button>
      </div>
      <div>
        <p>
          Reset all scores on the Tournament Board, Leaderboard scores will not
          be effected
        </p>
      </div>
    </div>
    <div class="grid">
      <div>
        <button
          class="danger"
          onclick="confirm_auth_get('/api/game/reboot','Reboot your Pinball Machine')"
        >
          Reboot Pinball Machine
        </button>
      </div>
      <div>
        <p>
          Power Cycle the Pinball Machine. This does not check for and will
          erase currently running games
        </p>
      </div>
    </div>
    <div class="grid">
      <div>
        <button onclick="localStorage.clear(); window.location.reload();">
          Clear Browser Storage
        </button>
      </div>
      <div>
        <p>
          Clears stored data from browser, use this if you are getting weird
          behaviour that refreshing does not clear. This will log you out.
        </p>
      </div>
    </div>
    <div class="grid">
      <div>
        <button
          class="danger"
          onclick="confirm_auth_get('api/settings/factory_reset', 'Factory Reset Vector')"
        >
          Factory Reset Vector
        </button>
      </div>
      <div>
        <p>
          Resets all settings and scores to factory defaults. Machine will
          reboot immediately and Vector will return to setup.
          <b>Required before installing vector in a new Pinball Machine</b>
        </p>
      </div>
    </div>
  </section>
  <section>
    <h3>Debug</h3>
    <button class="secondary" onclick="downloadMemorySnapshot()">
      Download Memory Snapshot
    </button>
    <button class="secondary" onclick="downloadLogs()">Download Logs</button>
  </section>
  <section>
    <h3>Switch Diagnostics</h3>
    <p>
      Check the health of your switch matrix. Each switch is marked
      green/yellow/red based on how many points have been scored since the last
      time it was closed.
    </p>
    <button id="switch-diagnostics-refresh" class="secondary">
      Refresh
    </button>
    <div class="switch-diagnostics">
      <div class="switch-grid-container">
        <div id="switch-diagnostics-grid" class="switch-grid"></div>
      </div>
      <div id="switch-info-panel" class="switch-info-panel">
        <h4>Switch Info</h4>
        <div id="switch-info-content" class="switch-info-content">
          Click a switch to see its details.
        </div>
      </div>
    </div>
  </section>
  <section>
    <h2>Help</h2>
    <hr />
    <h5>Accessing AP / Configure Mode</h5>
    <ul>
      <li>Power off your pinball machine</li>
      <li>Wait until the LEDs on your Vector board completely turn off</li>
      <li>
        Locate and hold the small button that is <u>not</u> labeled "BOOTSEL"
      </li>
      <li>
        While continuing to hold the button, power on your pinball machine
      </li>
      <li>Release the button once the LED next to it begins flashing</li>
      <li>
        On your device, look for and connect to the WiFi network named "Warped
        Pinball" (it may take a moment to appear)
      </li>
      <li>Your browser should automatically open the configuration page</li>
    </ul>

    <h5>Connecting to Your Vector</h5>
    Use the following methods to connect to your Vector (They are listed roughly
    in order of convenience):
    <ol>
      <li>
        <b>Network Discovery</b> If you're currently viewing a Vector interface,
        you can easily connect to other units on the same network. Click the
        game name at the top of the page to view all available Vector devices.
        The current Vector's IP address is visible in your browser's URL bar. If
        the game is not visible, try refreshing the page after ~30 seconds.
      </li>
      <li>
        <b>Display Identification</b> With "Show IP on machine" enabled, your
        Vector displays its IP address on the game screen approximately every 30
        seconds during idle time. On System 9 machines, watch for the player
        scores to temporarily display the IP address. Simply enter this IP in
        your browser to connect.
      </li>
      <li>
        <b>AP Mode Reference</b> You can boot into AP mode (using the
        instructions above) to view the last known IP address of your Vector.
        This address typically remains valid when you restart in normal mode.
      </li>
      <li>
        <b>Router Management</b> For the most consistent connection, check your
        WiFi router's connected devices list to identify your Vector's IP
        address. Consider assigning a static IP address in your router settings
        to maintain the same address between restarts.
      </li>
    </ol>

    <h5>Resetting Your Admin Password</h5>
    <p>
      To reset your admin password, boot into AP mode using the instructions
      above and enter your new password in the configuration page.
    </p>

    <h5>Report a bug or request a feature</h5>
    <p>
      <a href="https://github.com/warped-pinball/vector/issues/new/choose">
        github.com/warped-pinball/vector/issues/new/choose
      </a>
    </p>
  </section>
</div>
<dialog id="update-progress-modal">
  <article>
    <header>
      <h2>Updating - Please wait</h2>
    </header>

    <p>
      <b
        >Do not close this window or disconnect from network while update is in
        progress.</b
      >
      Updates typically take less than 2 minutes to complete.
    </p>
    <code
      id="update-progress-log"
      style="
        width: 100%;
        height: 250px;
        overflow: auto;
        scrollbar-width: none;
        -ms-overflow-style: none;
        text-align: left;
        padding-bottom: 1em;
        white-space: pre-wrap;
      "
    ></code>
    <progress id="update-progress-bar" value="0" max="100" />
  </article>
</dialog>
